<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Kubelib &#8212; Kubelib 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="kubelib" href="includeme.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="kubelib">
<h1>Kubelib<a class="headerlink" href="#kubelib" title="Permalink to this headline">¶</a></h1>
<p>kubelib both wraps kubectl and makes direct kubernetes api calls.  It is intended to simplify scripting jenkins tasks.  It is purely client side; nothing needs to be installed on the node or pods.</p>
<p>This module makes use of the &#8220;bunch&#8221; python module for object return values.</p>
<p><a class="reference external" href="https://github.com/dsc/bunch">https://github.com/dsc/bunch</a></p>
<p>tldr: you can use them as dictionaries (ala pod[&#8216;metadata&#8217;][&#8216;name&#8217;]) or with attributes (ala pod.metadata.name).  I think this makes code with deeply nested dictionaries easier to read.</p>
<span class="target" id="module-kubelib"></span><div class="section" id="kubectl">
<h2>Kubectl<a class="headerlink" href="#kubectl" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Kubectl">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Kubectl</code><span class="sig-paren">(</span><em>context=None</em>, <em>namespace=None</em>, <em>dryrun=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.KubeUtils</span></code></p>
<p>Backward compatibility shim.</p>
<p>Don&#8217;t use this for new projects.</p>
<p>Wrapper to upstream __init__.</p>
<dl class="method">
<dt id="kubelib.Kubectl.apply_path">
<code class="descname">apply_path</code><span class="sig-paren">(</span><em>path</em>, <em>recursive=False</em>, <em>replace_set=None</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.apply_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all the yaml files in <cite>path</cite> to the current context/namespace.</p>
<p>Exactly what apply means depends on the resource type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; Directory of yaml resources</li>
<li><strong>recursive</strong> &#8211; True to recurse into subdirectories</li>
<li><strong>reload_set</strong> &#8211; Set of containers that should be reloaded</li>
<li><strong>context</strong> &#8211; optional prefer yaml in this directory</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.clean_volumes">
<code class="descname">clean_volumes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.clean_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean persistent volumes.</p>
<p>Delete and rebuild all volumes in a released or failed state.
Note: this Persistent Volumes are <em>not</em> contained by namespace
so this is a whole-context operation.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.copy_to_pod">
<code class="descname">copy_to_pod</code><span class="sig-paren">(</span><em>source_fn</em>, <em>pod</em>, <em>destination_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.copy_to_pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file into the given pod.</p>
<p>This can be handy for dropping files into a pod for testing.</p>
<p>You need to have passwordless ssh access to the node and
be a member of the docker group there.</p>
<p>TODO: add container parameter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source_fn</strong> &#8211; path and filename you want to copy</li>
<li><strong>pod</strong> &#8211; Pod name</li>
<li><strong>destination_fn</strong> &#8211; path and filename to place it (path must exist)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.create_if_missing">
<code class="descname">create_if_missing</code><span class="sig-paren">(</span><em>friendly_resource_type</em>, <em>glob_path</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.create_if_missing" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated.  Create the given resource if it is missing.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.create_namespace">
<code class="descname">create_namespace</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.create_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new namespace.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the given path/fn.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.delete_by_type">
<code class="descname">delete_by_type</code><span class="sig-paren">(</span><em>resource_type</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.delete_by_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through and destroy all resources of the given type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource_type</strong> &#8211; resource type (Service, Pod, etc..)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the given path/fn.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.set_context">
<code class="descname">set_context</code><span class="sig-paren">(</span><em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.set_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current context.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; Context to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.set_namespace">
<code class="descname">set_namespace</code><span class="sig-paren">(</span><em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.set_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current namespace.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl namespace for this context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; Namespace to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Kubectl.set_vault">
<code class="descname">set_vault</code><span class="sig-paren">(</span><em>vault_client</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubectl.set_vault" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to assign a pre-autheticated vault client.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vault_client</strong> &#8211; hvac client</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="kubeconfig">
<h2>KubeConfig<a class="headerlink" href="#kubeconfig" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="kubelib.KubeConfig">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">KubeConfig</code><span class="sig-paren">(</span><em>context=None</em>, <em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Holds config information to communicate with a kube cluster.</p>
<p>Create a new KubeConfig object.</p>
<p>This holds all the config information needed to communicate with
a particular kubernetes cluster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Kubernetes context</li>
<li><strong>namespace</strong> &#8211; Kubernetes namespace</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="kubelib.KubeConfig.set_context">
<code class="descname">set_context</code><span class="sig-paren">(</span><em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeConfig.set_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current context.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; Context to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeConfig.set_namespace">
<code class="descname">set_namespace</code><span class="sig-paren">(</span><em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeConfig.set_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current namespace.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl namespace for this context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; Namespace to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeConfig.set_vault">
<code class="descname">set_vault</code><span class="sig-paren">(</span><em>vault_client</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeConfig.set_vault" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to assign a pre-autheticated vault client.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vault_client</strong> &#8211; hvac client</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="kubeutils">
<h2>KubeUtils<a class="headerlink" href="#kubeutils" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="kubelib.KubeUtils">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">KubeUtils</code><span class="sig-paren">(</span><em>context=None</em>, <em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.KubeConfig</span></code></p>
<p>Child of KubeConfig with some helper functions attached.</p>
<p>Create a new KubeConfig object.</p>
<p>This holds all the config information needed to communicate with
a particular kubernetes cluster.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Kubernetes context</li>
<li><strong>namespace</strong> &#8211; Kubernetes namespace</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="kubelib.KubeUtils.apply_path">
<code class="descname">apply_path</code><span class="sig-paren">(</span><em>path</em>, <em>recursive=False</em>, <em>replace_set=None</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.apply_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all the yaml files in <cite>path</cite> to the current context/namespace.</p>
<p>Exactly what apply means depends on the resource type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; Directory of yaml resources</li>
<li><strong>recursive</strong> &#8211; True to recurse into subdirectories</li>
<li><strong>reload_set</strong> &#8211; Set of containers that should be reloaded</li>
<li><strong>context</strong> &#8211; optional prefer yaml in this directory</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.clean_volumes">
<code class="descname">clean_volumes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.clean_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean persistent volumes.</p>
<p>Delete and rebuild all volumes in a released or failed state.
Note: this Persistent Volumes are <em>not</em> contained by namespace
so this is a whole-context operation.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.copy_to_pod">
<code class="descname">copy_to_pod</code><span class="sig-paren">(</span><em>source_fn</em>, <em>pod</em>, <em>destination_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.copy_to_pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file into the given pod.</p>
<p>This can be handy for dropping files into a pod for testing.</p>
<p>You need to have passwordless ssh access to the node and
be a member of the docker group there.</p>
<p>TODO: add container parameter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source_fn</strong> &#8211; path and filename you want to copy</li>
<li><strong>pod</strong> &#8211; Pod name</li>
<li><strong>destination_fn</strong> &#8211; path and filename to place it (path must exist)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.delete_by_type">
<code class="descname">delete_by_type</code><span class="sig-paren">(</span><em>resource_type</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.delete_by_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through and destroy all resources of the given type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource_type</strong> &#8211; resource type (Service, Pod, etc..)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.set_context">
<code class="descname">set_context</code><span class="sig-paren">(</span><em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.set_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current context.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; Context to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.set_namespace">
<code class="descname">set_namespace</code><span class="sig-paren">(</span><em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.set_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current namespace.</p>
<p>This is generally done during initialization.</p>
<p>Passing <em>None</em> will detect and utilize the current
default kubectl namespace for this context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; Namespace to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.KubeUtils.set_vault">
<code class="descname">set_vault</code><span class="sig-paren">(</span><em>vault_client</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.KubeUtils.set_vault" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to assign a pre-autheticated vault client.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vault_client</strong> &#8211; hvac client</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="kubernetes">
<h2>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Kubernetes">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Kubernetes</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Kubernetes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base class for communicating with Kubernetes.</p>
<p>Provides both HTTP and a kubectl command line wrapper.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="attribute">
<dt id="kubelib.Kubernetes.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Kubernetes.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configmap">
<h3>ConfigMap<a class="headerlink" href="#configmap" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.ConfigMap">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">ConfigMap</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReplaceActor</span></code></p>
<p>ConfigMap Resource.</p>
<p>The ConfigMap API resource holds key-value pairs of configuration
data that can be consumed in pods or used to store configuration data
for system components such as controllers. ConfigMap is similar to
Secrets, but designed to more conveniently support working with
strings that do not contain sensitive information.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.ConfigMap.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace if it exists, Create if it doesn&#8217;t.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.from_dict">
<code class="descname">from_dict</code><span class="sig-paren">(</span><em>configkey</em>, <em>literal_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a dict into a configmap.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.from_path">
<code class="descname">from_path</code><span class="sig-paren">(</span><em>configkey</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.from_path" title="Permalink to this definition">¶</a></dt>
<dd><p>File contents should be one config key/value per line delimited by an equal.</p>
<p>ala:</p>
<p>enemies=aliens
lives=3
enemies.cheat=true
enemies.cheat.level=noGoodRotten</p>
<p># When &#8211;from-file points to a directory, each file directly in that
# directory is used to populate a key in the ConfigMap, where the name
# of the key is the filename, and the value of the key is the content
# of the file.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ConfigMap.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ConfigMap.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.ConfigMap.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ConfigMap.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.ConfigMap.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.ConfigMap.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.ConfigMap.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ConfigMap.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.ConfigMap.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ConfigMap.url_type">
<code class="descname">url_type</code><em class="property"> = 'configmaps'</em><a class="headerlink" href="#kubelib.ConfigMap.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="daemonset">
<h3>DaemonSet<a class="headerlink" href="#daemonset" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.DaemonSet">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">DaemonSet</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReplaceActor</span></code></p>
<p>DaemonSet resource.</p>
<p>A Daemon Set ensures that all (or some) nodes run a copy of a
pod. As nodes are added to the cluster, pods are added to them. As
nodes are removed from the cluster, those pods are garbage collected.
Deleting a Daemon Set will clean up the pods it created.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.DaemonSet.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace if it exists, Create if it doesn&#8217;t.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.DaemonSet.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.DaemonSet.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.DaemonSet.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.DaemonSet.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/extensions/v1beta1'</em><a class="headerlink" href="#kubelib.DaemonSet.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.DaemonSet.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.DaemonSet.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.DaemonSet.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.DaemonSet.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.DaemonSet.url_type">
<code class="descname">url_type</code><em class="property"> = 'daemonsets'</em><a class="headerlink" href="#kubelib.DaemonSet.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="deployment">
<h3>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Deployment">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Deployment</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ApplyActor</span></code></p>
<p>Deployment resource.</p>
<p>A Deployment provides declarative updates for Pods and
Replica Sets (the next-generation Replication Controller).
You only need to describe the desired state in a Deployment
object, and the Deployment controller will change the actual
state to the desired state at a controlled rate for you. You
can define Deployments to create new resources, or replace
existing ones by new ones.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Deployment.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple apply with secrets support.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Deployment.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Deployment.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.Deployment.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Deployment.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/extensions/v1beta1'</em><a class="headerlink" href="#kubelib.Deployment.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Deployment.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Deployment.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.secrets">
<code class="descname">secrets</code><em class="property"> = True</em><a class="headerlink" href="#kubelib.Deployment.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Deployment.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Deployment.url_type">
<code class="descname">url_type</code><em class="property"> = 'deployments'</em><a class="headerlink" href="#kubelib.Deployment.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="horizontalpodautoscaler">
<h3>HorizontalPodAutoscaler<a class="headerlink" href="#horizontalpodautoscaler" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.HorizontalPodAutoscaler">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">HorizontalPodAutoscaler</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>HorizontalPodAutoscaler resource.</p>
<p>With Horizontal Pod Autoscaling, Kubernetes automatically scales the
number of pods in a replication controller, deployment or replica set
based on observed CPU utilization (or, with alpha support, on some other,
application-provided metrics).
The Horizontal Pod Autoscaler is implemented as a Kubernetes API resource
and a controller. The resource determines the behavior of the controller.
The controller periodically adjusts the number of replicas in a replication
controller or deployment to match the observed average CPU utilization to
the target specified by user.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.HorizontalPodAutoscaler.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/autoscaling/v1'</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.HorizontalPodAutoscaler.url_type">
<code class="descname">url_type</code><em class="property"> = 'horizontalpodautoscalers'</em><a class="headerlink" href="#kubelib.HorizontalPodAutoscaler.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="ingress">
<h3>Ingress<a class="headerlink" href="#ingress" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Ingress">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Ingress</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReplaceActor</span></code></p>
<p>Ingress resource.</p>
<p>An Ingress is a collection of rules that allow inbound
connections to reach the cluster services.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Ingress.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace if it exists, Create if it doesn&#8217;t.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Ingress.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Ingress.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.aliases">
<code class="descname">aliases</code><em class="property"> = ['ing']</em><a class="headerlink" href="#kubelib.Ingress.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Ingress.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/extensions/v1beta1'</em><a class="headerlink" href="#kubelib.Ingress.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Ingress.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Ingress.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.secrets">
<code class="descname">secrets</code><em class="property"> = True</em><a class="headerlink" href="#kubelib.Ingress.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Ingress.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Ingress.url_type">
<code class="descname">url_type</code><em class="property"> = 'ingresses'</em><a class="headerlink" href="#kubelib.Ingress.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="job">
<h3>Job<a class="headerlink" href="#job" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Job">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Job</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.DeleteVerifyCreateActor</span></code></p>
<p>Job resource.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Job.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete then create.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Job.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Job.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.Job.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.always_force">
<code class="descname">always_force</code><em class="property"> = True</em><a class="headerlink" href="#kubelib.Job.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/extensions/v1beta1'</em><a class="headerlink" href="#kubelib.Job.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Job.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Job.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.secrets">
<code class="descname">secrets</code><em class="property"> = True</em><a class="headerlink" href="#kubelib.Job.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Job.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Job.url_type">
<code class="descname">url_type</code><em class="property"> = 'jobs'</em><a class="headerlink" href="#kubelib.Job.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="namespace">
<h3>Namespace<a class="headerlink" href="#namespace" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Namespace">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Namespace</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>Namespace resource.</p>
<p>Kubernetes supports multiple virtual clusters backed by the same
physical cluster. These virtual clusters are called namespaces.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Namespace.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the given namespace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; name of the namespace we want to create</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if the create succeeded, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the given namespace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; name of the namespace we want to delete</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Namespace.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Namespace.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.aliases">
<code class="descname">aliases</code><em class="property"> = ['ns']</em><a class="headerlink" href="#kubelib.Namespace.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Namespace.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Namespace.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Namespace.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.Namespace.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Namespace.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Namespace.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Namespace.url_type">
<code class="descname">url_type</code><em class="property"> = 'namespaces'</em><a class="headerlink" href="#kubelib.Namespace.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="node">
<h3>Node<a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Node">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Node</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.IgnoreActor</span></code></p>
<p>Node resource.</p>
<p>Node is a worker machine in Kubernetes, previously known as Minion.
Node may be a VM or physical machine, depending on the cluster. Each
node has the services necessary to run Pods and is managed by the
master components. The services on a node include docker, kubelet
and network proxy. See The Kubernetes Node section in the architecture
design doc for more details.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Node.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>NOOP Placeholder to be overridden by sub-classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>desc</strong> &#8211; Munch resource object</li>
<li><strong>filename</strong> &#8211; Filename associated with the resource</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Node.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Node.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.aliases">
<code class="descname">aliases</code><em class="property"> = ['node']</em><a class="headerlink" href="#kubelib.Node.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Node.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Node.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Node.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Node.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Node.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Node.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Node.url_type">
<code class="descname">url_type</code><em class="property"> = 'nodes'</em><a class="headerlink" href="#kubelib.Node.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="persistentvolume">
<h3>PersistentVolume<a class="headerlink" href="#persistentvolume" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.PersistentVolume">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">PersistentVolume</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>PersistentVolume resource.</p>
<p>A PersistentVolume (PV) is a piece of networked storage in the cluster
that has been provisioned by an administrator. It is a resource in the
cluster just like a node is a cluster resource. PVs are volume plugins
like Volumes, but have a lifecycle independent of any individual pod that
uses the PV. This API object captures the details of the implementation of
the storage, be that NFS, iSCSI, or a cloud-provider-specific storage
system.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.PersistentVolume.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.set_claimRef">
<code class="descname">set_claimRef</code><span class="sig-paren">(</span><em>name</em>, <em>claimref</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.set_claimRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually link PV $name with the given claim reference (pvc name).</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.set_claim_ref">
<code class="descname">set_claim_ref</code><span class="sig-paren">(</span><em>name</em>, <em>claimref</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.set_claim_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually link PV $name with the given claim reference (pvc name).</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolume.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolume.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.aliases">
<code class="descname">aliases</code><em class="property"> = ['pv']</em><a class="headerlink" href="#kubelib.PersistentVolume.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PersistentVolume.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.PersistentVolume.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.PersistentVolume.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.PersistentVolume.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PersistentVolume.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.PersistentVolume.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolume.url_type">
<code class="descname">url_type</code><em class="property"> = 'persistentvolumes'</em><a class="headerlink" href="#kubelib.PersistentVolume.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="persistentvolumeclaim">
<h3>PersistentVolumeClaim<a class="headerlink" href="#persistentvolumeclaim" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.PersistentVolumeClaim">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">PersistentVolumeClaim</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>PersistentVolumeClaim resource.</p>
<p>A PersistentVolumeClaim (PVC) is a request for storage by a user. It
is similar to a pod. Pods consume node resources and PVCs consume PV
resources. Pods can request specific levels of resources (CPU and Memory).
Claims can request specific size and access modes (e.g, can be mounted once
read/write or many times read-only).</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PersistentVolumeClaim.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PersistentVolumeClaim.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.aliases">
<code class="descname">aliases</code><em class="property"> = ['pvc']</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PersistentVolumeClaim.url_type">
<code class="descname">url_type</code><em class="property"> = 'persistentvolumeclaims'</em><a class="headerlink" href="#kubelib.PersistentVolumeClaim.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="petset">
<h3>PetSet<a class="headerlink" href="#petset" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.PetSet">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">PetSet</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.DeleteCreateActor</span></code></p>
<p>PetSet resource.</p>
<p>In Kubernetes, most pod management abstractions group them into
disposable units of work that compose a micro service. Replication
controllers for example, are designed with a weak guarantee - that
there should be N replicas of a particular pod template. The pods
are treated as stateless units, if one of them is unhealthy or
superseded by a newer version, the system just disposes it.</p>
<p>A Pet Set, in contrast, is a group of stateful pods that require a
stronger notion of identity. The document refers to these as &#8220;clustered
applications&#8221;.</p>
<p>The co-ordinated deployment of clustered applications is notoriously
hard. They require stronger notions of identity and membership,
which they use in opaque internal protocols, and are especially
prone to race conditions and deadlock. Traditionally administrators
have deployed these applications by leveraging nodes as stable,
long-lived entities with persistent storage and static ips.</p>
<p>The goal of Pet Set is to decouple this dependency by assigning
identities to individual instances of an application that are not
anchored to the underlying physical infrastructure.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.PetSet.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete then create.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.PetSet.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.PetSet.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.PetSet.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PetSet.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/apps/v1alpha1'</em><a class="headerlink" href="#kubelib.PetSet.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.PetSet.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.PetSet.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.PetSet.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.PetSet.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.PetSet.url_type">
<code class="descname">url_type</code><em class="property"> = 'petsets'</em><a class="headerlink" href="#kubelib.PetSet.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="pod">
<h3>Pod<a class="headerlink" href="#pod" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Pod">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Pod</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.IgnoreActor</span></code></p>
<p>Pod resource.</p>
<p>A pod (as in a pod of whales or pea pod) is a group of one or more
containers (such as Docker containers), the shared storage for those
containers, and options about how to run the containers. Pods are always
co-located and co-scheduled, and run in a shared context. A pod models an
application-specific &#8220;logical host&#8221; - it contains one or more application
containers which are relatively tightly coupled - in a pre-container world,
they would have executed on the same physical or virtual machine.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Pod.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>NOOP Placeholder to be overridden by sub-classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>desc</strong> &#8211; Munch resource object</li>
<li><strong>filename</strong> &#8211; Filename associated with the resource</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.exec_cmd">
<code class="descname">exec_cmd</code><span class="sig-paren">(</span><em>pod</em>, <em>container</em>, <em>*command</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.exec_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a command in a pod/container.</p>
<p>If container is None the kubectl behavior is to pick the
first container if possible</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Getting a pods base name is disturbingly tricky.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Pod.wait_for_pod">
<code class="descname">wait_for_pod</code><span class="sig-paren">(</span><em>pod_name</em>, <em>max_delay=300</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Pod.wait_for_pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until the given pod is running.</p>
<p>Returns the full unique pod name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pod_name</strong> &#8211; Pod name (without unique suffix)</li>
<li><strong>max_delay</strong> &#8211; Maximum number of seconds to wait</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Unique pod name</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>TimeOut</strong> &#8211; When max_delay is exceeded</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.aliases">
<code class="descname">aliases</code><em class="property"> = ['pod']</em><a class="headerlink" href="#kubelib.Pod.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Pod.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Pod.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Pod.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Pod.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Pod.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Pod.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Pod.url_type">
<code class="descname">url_type</code><em class="property"> = 'pods'</em><a class="headerlink" href="#kubelib.Pod.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="replicationcontroller">
<h3>ReplicationController<a class="headerlink" href="#replicationcontroller" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.ReplicationController">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">ReplicationController</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.DeleteCreateActor</span></code></p>
<p>ReplicationController resource.</p>
<p>A replication controller ensures that a specified number of pod
&#8220;replicas&#8221; are running at any one time. In other words, a replication
controller makes sure that a pod or homogeneous set of pods are always up
and available. If there are too many pods, it will kill some. If there are
too few, the replication controller will start more. Unlike manually
created pods, the pods maintained by a replication controller are
automatically replaced if they fail, get deleted, or are terminated. For
example, your pods get re-created on a node after disruptive maintenance
such as a kernel upgrade. For this reason, we recommend that you use a
replication controller even if your application requires only a single pod.
You can think of a replication controller as something similar to a process
supervisor, but rather than individual processes on a single node, the
replication controller supervises multiple pods across multiple nodes.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.ReplicationController.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete then create.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ReplicationController.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ReplicationController.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.ReplicationController.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ReplicationController.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.ReplicationController.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.ReplicationController.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.ReplicationController.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.secrets">
<code class="descname">secrets</code><em class="property"> = True</em><a class="headerlink" href="#kubelib.ReplicationController.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.ReplicationController.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ReplicationController.url_type">
<code class="descname">url_type</code><em class="property"> = 'replicationcontrollers'</em><a class="headerlink" href="#kubelib.ReplicationController.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="secret">
<h3>Secret<a class="headerlink" href="#secret" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Secret">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Secret</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReplaceActor</span></code></p>
<p>Secret resource.</p>
<p>Objects of type secret are intended to hold sensitive information,
such as passwords, OAuth tokens, and ssh keys. Putting this information
in a secret is safer and more flexible than putting it verbatim in a
pod definition or in a docker image. See Secrets design document for
more information.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Secret.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace if it exists, Create if it doesn&#8217;t.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>name</em>, <em>dict_of_secrets</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new secret(s).</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.replace">
<code class="descname">replace</code><span class="sig-paren">(</span><em>name</em>, <em>dict_of_secrets</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace an existing secret(s).</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Secret.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Secret.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.Secret.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Secret.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Secret.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Secret.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Secret.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Secret.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Secret.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Secret.url_type">
<code class="descname">url_type</code><em class="property"> = 'secrets'</em><a class="headerlink" href="#kubelib.Secret.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="service">
<h3>Service<a class="headerlink" href="#service" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Service">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Service</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReadMergeApplyActor</span></code></p>
<p>Service resource.</p>
<p>Kubernetes Pods are mortal. They are born and they die, and they
are not resurrected. ReplicationControllers in particular create and
destroy Pods dynamically (e.g. when scaling up or down or when doing
rolling updates). While each Pod gets its own IP address, even those
IP addresses cannot be relied upon to be stable over time. This leads
to a problem: if some set of Pods (let&#8217;s call them backends) provides
functionality to other Pods (let&#8217;s call them frontends) inside the
Kubernetes cluster, how do those frontends find out and keep track of
which backends are in that set?</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Service.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Read, Merge then Apply.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Service.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Service.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.Service.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Service.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.api_base">
<code class="descname">api_base</code><em class="property"> = '/api/v1'</em><a class="headerlink" href="#kubelib.Service.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Service.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.Service.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Service.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Service.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Service.url_type">
<code class="descname">url_type</code><em class="property"> = 'services'</em><a class="headerlink" href="#kubelib.Service.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>
<div class="section" id="role-based-access-control-rbac">
<h2>Role Based Access Control (RBAC)<a class="headerlink" href="#role-based-access-control-rbac" title="Permalink to this headline">¶</a></h2>
<div class="section" id="clusterrole">
<h3>ClusterRole<a class="headerlink" href="#clusterrole" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.ClusterRole">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">ClusterRole</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>ClusterRole resource.</p>
<p>ClusterRoles hold the same information as a Role but can apply to any
namespace as well as non-namespaced resources (such as Nodes,
PersistentVolume, etc.)</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.ClusterRole.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRole.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRole.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.ClusterRole.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ClusterRole.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/rbac.authorization.k8s.io/v1alpha1'</em><a class="headerlink" href="#kubelib.ClusterRole.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.ClusterRole.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.ClusterRole.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ClusterRole.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.ClusterRole.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRole.url_type">
<code class="descname">url_type</code><em class="property"> = 'clusterroles'</em><a class="headerlink" href="#kubelib.ClusterRole.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="clusterrolebinding">
<h3>ClusterRoleBinding<a class="headerlink" href="#clusterrolebinding" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.ClusterRoleBinding">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">ClusterRoleBinding</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>ClusterRoleBinding resource.</p>
<p>A ClusterRoleBinding may be used to grant permissions in all namespaces.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.ClusterRoleBinding.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.ClusterRoleBinding.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.ClusterRoleBinding.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/rbac.authorization.k8s.io/v1alpha1'</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.ClusterRoleBinding.url_type">
<code class="descname">url_type</code><em class="property"> = 'clusterrolebindings'</em><a class="headerlink" href="#kubelib.ClusterRoleBinding.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="networkpolicy">
<h3>NetworkPolicy<a class="headerlink" href="#networkpolicy" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.NetworkPolicy">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">NetworkPolicy</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.ReplaceActor</span></code></p>
<p>NetworkPolicy resource.</p>
<p>A network policy is a specification of how selections of pods are
allowed to communicate with each other and other network endpoints.
NetworkPolicy resources use labels to select pods and define whitelist
rules which allow traffic to the selected pods in addition to what is
allowed by the isolation policy for a given namespace.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.NetworkPolicy.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace if it exists, Create if it doesn&#8217;t.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.NetworkPolicy.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.NetworkPolicy.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.NetworkPolicy.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.NetworkPolicy.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/extensions/v1beta1'</em><a class="headerlink" href="#kubelib.NetworkPolicy.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.NetworkPolicy.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}'</em><a class="headerlink" href="#kubelib.NetworkPolicy.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.NetworkPolicy.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.NetworkPolicy.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.NetworkPolicy.url_type">
<code class="descname">url_type</code><em class="property"> = 'networkpolicies'</em><a class="headerlink" href="#kubelib.NetworkPolicy.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="role">
<h3>Role<a class="headerlink" href="#role" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.Role">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">Role</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>Role resource.</p>
<p>Roles hold a logical grouping of permissions. These permissions map very
closely to ABAC policies, but only contain information about requests being
made. Permission are purely additive, rules may only omit permissions they
do not wish to grant.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.Role.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.Role.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.Role.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.Role.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Role.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/rbac.authorization.k8s.io/v1alpha1'</em><a class="headerlink" href="#kubelib.Role.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.Role.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.Role.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.Role.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.Role.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.Role.url_type">
<code class="descname">url_type</code><em class="property"> = 'roles'</em><a class="headerlink" href="#kubelib.Role.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="rolebinding">
<h3>RoleBinding<a class="headerlink" href="#rolebinding" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="kubelib.RoleBinding">
<em class="property">class </em><code class="descclassname">kubelib.</code><code class="descname">RoleBinding</code><span class="sig-paren">(</span><em>kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kubelib.kubelib.CreateIfMissingActor</span></code></p>
<p>RoleBinding resource.</p>
<p>RoleBindings perform the task of granting the permission to a user or
set of users. They hold a list of subjects which they apply to, and a
reference to the Role being assigned.</p>
<p>RoleBindings may also refer to a ClusterRole. However, a RoleBinding that
refers to a ClusterRole only applies in the RoleBinding&#8217;s namespace, not at
the cluster level. This allows admins to define a set of common roles for
the entire cluster, then reuse them in multiple namespaces.</p>
<p>&#8220;Create a new Kubernetes object.</p>
<dl class="method">
<dt id="kubelib.RoleBinding.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Create only.  You almost never want this.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.apply_file">
<code class="descname">apply_file</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.apply_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl apply wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.apply_secrets">
<code class="descname">apply_secrets</code><span class="sig-paren">(</span><em>desc</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.apply_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject secrets into the given resource.</p>
<p>If this resource type support secrets and a vault client has
been assigned we want to check vault to see if there are any
secrets for this resource.  If there are we want to extract
the secrets from vault and create them as kubernetes secrets.
We&#8217;re also going to patch into the resource yaml to make the
secrets available as environmentals.</p>
<p>TODO: support &#8216;type&#8217;s other than &#8216;env&#8217; to automate putting
files into the container.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.build_env_secrets">
<code class="descname">build_env_secrets</code><span class="sig-paren">(</span><em>pod_secrets</em>, <em>secret_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.build_env_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hashi secrets to Kube secrets.</p>
<p>reformulate secrets to a dict suitable for
creating kube secrets and a list for injecting
into the .yaml</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.create_path">
<code class="descname">create_path</code><span class="sig-paren">(</span><em>path_or_fn</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl create wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the named resource.</p>
<p>TODO: should be easy to rewrite this as a kube api
delete call instead of going through kubectl.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.delete_path">
<code class="descname">delete_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>cascade=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.delete_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl delete wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a yaml-ish text blob.</p>
<p>Not helpful for automation, very helpful for humans.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>name</em>, <em>force_reload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <em>name</em> exist in kubes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the resource we are interest in</li>
<li><strong>force_reload</strong> &#8211; Force a fresh cope of inventory (bypass cache)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single munch describing one resource by name.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.get_list">
<code class="descname">get_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of munch objects.</p>
<p>Describing all the resources of this type in this namespace/context</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.get_secrets">
<code class="descname">get_secrets</code><span class="sig-paren">(</span><em>container_name</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.get_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve secrets from vault for the named pod.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>name</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one resource.</p>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.replace_path">
<code class="descname">replace_path</code><span class="sig-paren">(</span><em>path_or_fn</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.replace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple kubectl replace wrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_or_fn</strong> &#8211; Path or filename of yaml resource descriptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kubelib.RoleBinding.simple_name">
<code class="descname">simple_name</code><span class="sig-paren">(</span><em>desc</em><span class="sig-paren">)</span><a class="headerlink" href="#kubelib.RoleBinding.simple_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Override-able func to get the name of a resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.aliases">
<code class="descname">aliases</code><em class="property"> = []</em><a class="headerlink" href="#kubelib.RoleBinding.aliases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.always_force">
<code class="descname">always_force</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.RoleBinding.always_force" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.api_base">
<code class="descname">api_base</code><em class="property"> = '/apis/rbac.authorization.k8s.io/v1alpha1'</em><a class="headerlink" href="#kubelib.RoleBinding.api_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.cache">
<code class="descname">cache</code><em class="property"> = None</em><a class="headerlink" href="#kubelib.RoleBinding.cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.list_uri">
<code class="descname">list_uri</code><em class="property"> = '/{resource_type}'</em><a class="headerlink" href="#kubelib.RoleBinding.list_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.secrets">
<code class="descname">secrets</code><em class="property"> = False</em><a class="headerlink" href="#kubelib.RoleBinding.secrets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.single_uri">
<code class="descname">single_uri</code><em class="property"> = '/namespaces/{namespace}/{resource_type}/{name}'</em><a class="headerlink" href="#kubelib.RoleBinding.single_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="kubelib.RoleBinding.url_type">
<code class="descname">url_type</code><em class="property"> = 'rolebindings'</em><a class="headerlink" href="#kubelib.RoleBinding.url_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kubelib</a><ul>
<li><a class="reference internal" href="#kubectl">Kubectl</a></li>
<li><a class="reference internal" href="#kubeconfig">KubeConfig</a></li>
<li><a class="reference internal" href="#kubeutils">KubeUtils</a></li>
<li><a class="reference internal" href="#kubernetes">Kubernetes</a></li>
<li><a class="reference internal" href="#resources">Resources</a><ul>
<li><a class="reference internal" href="#configmap">ConfigMap</a></li>
<li><a class="reference internal" href="#daemonset">DaemonSet</a></li>
<li><a class="reference internal" href="#deployment">Deployment</a></li>
<li><a class="reference internal" href="#horizontalpodautoscaler">HorizontalPodAutoscaler</a></li>
<li><a class="reference internal" href="#ingress">Ingress</a></li>
<li><a class="reference internal" href="#job">Job</a></li>
<li><a class="reference internal" href="#namespace">Namespace</a></li>
<li><a class="reference internal" href="#node">Node</a></li>
<li><a class="reference internal" href="#persistentvolume">PersistentVolume</a></li>
<li><a class="reference internal" href="#persistentvolumeclaim">PersistentVolumeClaim</a></li>
<li><a class="reference internal" href="#petset">PetSet</a></li>
<li><a class="reference internal" href="#pod">Pod</a></li>
<li><a class="reference internal" href="#replicationcontroller">ReplicationController</a></li>
<li><a class="reference internal" href="#secret">Secret</a></li>
<li><a class="reference internal" href="#service">Service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#role-based-access-control-rbac">Role Based Access Control (RBAC)</a><ul>
<li><a class="reference internal" href="#clusterrole">ClusterRole</a></li>
<li><a class="reference internal" href="#clusterrolebinding">ClusterRoleBinding</a></li>
<li><a class="reference internal" href="#networkpolicy">NetworkPolicy</a></li>
<li><a class="reference internal" href="#role">Role</a></li>
<li><a class="reference internal" href="#rolebinding">RoleBinding</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="includeme.html" title="previous chapter">kubelib</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/source/kubelib.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, O'Reilly.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/source/kubelib.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>